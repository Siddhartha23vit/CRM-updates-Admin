<div class="container mt-3">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h1>Floor Management</h1>
      <div class="action-buttons">
        <button class="btn btn-outline-success me-2">
          <i class="fas fa-plus me-1"></i>Add New Project
        </button>
        <button class="btn btn-outline-success">
          <i class="fas fa-list me-1"></i>Project List
        </button>
      </div>
    </div>

    <div class="card-body">
      <!-- Selector Panel -->
      <div class="selector-panel">
        <div class="row">
          <div class="col-4">
            <div class="input-group">
              <select id="projects" class="form-control" [(ngModel)]="selectedProjectId" (change)="onProjectSelected()">
                <option value="" disabled selected>Select Project</option>
                <ng-container *ngFor="let project of projects">
                  <ng-container *ngIf="project.totalBuilding">
                    <option [ngValue]="project._id">{{ project.projectName }}</option>
                  </ng-container>
                </ng-container>
              </select>
            </div>
          </div>
          <div class="col-4">
            <div class="input-group">
              <select id="buildings" class="form-control" [(ngModel)]="selectedBuildingId" (change)="onBuildingSelected()">
                <option value="" disabled selected>Select Building</option>
                <option *ngFor="let building of buildingInputs" [ngValue]="building._id">{{ building.buildingName }}</option>
              </select>
              <button class="btn btn-success ms-3" type="button">
                <i class="fas fa-search me-1"></i>Search
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Floor Table -->
      <div class="table-responsive" *ngIf="floorInputs.length > 0">
        <table class="table">
          <thead>
            <tr>
              <th>Floor Name</th>
              <th>Total Flats</th>
              <th>Status</th>
              <th>Remarks</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let floor of floorInputs; let i = index">
              <tr>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="floor.floorName" placeholder="Enter Floor Name"/>
                </td>
                <td>
                  <input type="number" class="form-control" [(ngModel)]="floor.floorflat" placeholder="Enter Total Flats" min="0"/>
                </td>
                <td>
                  <select class="form-control" [(ngModel)]="floor.floorStatus">
                    <option value="" disabled selected>Select Status</option>
                    <option value="UnderConstruction">Under Construction</option>
                    <option value="Completed">Completed</option>
                  </select>
                </td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="floor.remark" placeholder="Enter Remarks"/>
                </td>
                <td>
                  <div class="action-buttons">
                    <button class="btn btn-sm btn-outline-warning" title="Update">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-danger" title="Delete">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>

        <!-- Save Button -->
        <div class="save-container">
          <button class="btn btn-success" (click)="addfloorList()">
            <i class="fas fa-save me-1"></i>Save Changes
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
